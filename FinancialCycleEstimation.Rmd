---
title: "שיטות לזיהוי מחזור פיננסי"
author: "מיכאל גורקוב"
header-includes:
   - \usepackage{multirow,rotating}
   - \usepackage{fontspec}
   - \setmainfont{David}
   - \usepackage{polyglossia}
   - \setdefaultlanguage{hebrew}
   - \usepackage[fontsize=13pt]{scrextend}
output:
  pdf_document:
    latex_engine: xelatex
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

```


```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)

```



```{r Load libraries and auxilary function}

source(paste0("C:\\Users\\Misha\\Documents\\BBQ-Algorithm\\",
              "BBQ-Auxilary functions.R"))

library(xts)

library(PerformanceAnalytics)

gdp = import.gdp.data(paste0("C:\\Users\\Misha\\Documents\\",
                             "BBQ-Algorithm\\GDP.csv"))


```



בנייר זה נסקור את השיטות לאמידה של מחזורי עסקים (מחזור ריאלי) וזאת על מנת לפתח שיטה עקבית לאמידה של מחזור פיננסי. קיימות שתי גישות לאמידה של מחזורי עסקים : גישת Point Turning וגישת Analysis Frequency

\section{גישת Point Turning}

בגישה זו המטרה הינה לזהות נקודות קיצון מקומיות (גבעות ושפלים), לצורך קביעה האם אנו נמצאים בשלב התרחבות או צמצום. זיהוי נקודות הקיצון בדרך כלל מתבצע עבור תת תקופה מסוימת (למשל עבור תדירות רבעונית מקובל לקחת תקופה של כ5 רבעונים). במידה ונקודה כלשהי גבוהה (נמוכה) משכנותיה בתת התקופה הנקודה נקבעת כנקודת מקסימום (מינימום).


```{r plot no cencoring bbq}

# Identify a set of potential peaks and troughs

df = cbind.xts(gdp,rollapply(gdp, width = 5, FUN = identify.turning.point,
                        align = "center"))

names(df) = c("GDP","TP")

alt.peaks = get.alternating.peaks(peaks = df[df$TP == 1,],
                                  troughs = df[df$TP == -1,],
                                  timeframe = index(df))

alt.troughs = get.alternating.troughs(peaks = df[df$TP == 1,],
                                  troughs = df[df$TP == -1,],
                                  timeframe = index(df))

cycle_date = paste(as.Date(index(alt.peaks)),
                   as.Date(index(alt.troughs)),sep = "/")

chart.TimeSeries(df$GDP * 10 ^ (-3),
                 main = "Business Cycle - Recessions\n (quarterly GDP)",
                 xaxis = FALSE,ylab = "Billions ILS",
                 period.areas = cycle_date,period.color = "lightblue")

axis(side = 1,at = seq_along(index(df)),labels = index(df))
```


